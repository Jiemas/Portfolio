@inject NavigationManager NavManager

<MudPaper Elevation="0" Style="background-color: #EEF0F2;" Class="px-md-20 px-sm-10 px-xs-5 pb-5" id="Skills">
  <MudText Color=Color.Primary Typo="Typo.h2" Class="pt-10">Skills</MudText>
    <MudGrid Justify="Justify.Center" Class="mt-0" Spacing="8">
      @for (int i = 0; i < (keys.Count < 3 ? keys.Count : 3); i++)
      {
        int savedI = i;
        <MudItem style="display: flex;">
          <SingleSkill skillData="@(skillsDict[keys[savedI]])" OnLinkClick="HandleLinkClick"/>
        </MudItem>
      }
    </MudGrid>

    @if (keys.Count > 3)
    {
      <MudCollapse Expanded="_expanded">
        <MudGrid Justify="Justify.Center" Class="mt-0 pb-5" Spacing="8">
          @for (int i = 3; i < keys.Count; i++)
          {
            int savedI = i;
            <MudItem style="display: flex;">
              <SingleSkill skillData="@(skillsDict[keys[savedI]])" OnLinkClick="HandleLinkClick"/>
            </MudItem>
          }
        </MudGrid>
      </MudCollapse>

      <MudGrid Justify="Justify.Center" Class="pt-10">
        <MudToggleIconButton
          @bind-Toggled="_expanded"
          Icon="@Icons.Material.Filled.KeyboardArrowDown"
          ToggledIcon="@Icons.Material.Filled.KeyboardArrowUp"
          Size="Size.Large"
        >
        </MudToggleIconButton>
      </MudGrid>
    }
</MudPaper>


@code {
  [Parameter]
  public bool _expanded { get; set; }

  [Parameter]
  public required Dictionary<string, Skill> skillsDict { get; set; }

  [Parameter]
  public required List<string> keys {get; set;}

  [Parameter]
  public EventCallback<string> OnChildLinkClick { get; set;}

  private async Task HandleLinkClick(string data)
  {
    await OnChildLinkClick.InvokeAsync(data);
  }

}